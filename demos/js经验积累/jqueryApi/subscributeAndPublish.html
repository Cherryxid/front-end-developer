<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>event propagation</title>
		<link rel = "stylesheet" href = "css/base.css"/>
	</head>
	<body>
		
		<a></a>
		<script type="text/javascript" src = "js/jquery-1.7.1.js"></script>
		<script>
			$(function(){
				
				(function($){
					//http://benalman.com/
					//不能自定义订阅者的主体，只能是o
					var o = $({});
					$.subscribe = function(){
						o.bind.apply(o,arguments);
					};
					$.unsubscribe = function(){
						o.unbind.apply(o,arguments);
					};
					$.publish = function(){
						o.trigger.apply(o,arguments);
					};
				})(jQuery);
				
				$.subscribe("newInfo",function(evt,data){
					console.log(evt.type,data);
				});
				$.publish("newInfo",[1,2,3]);//此时data为1，jquery内部截取过了。。。
				$.publish("newInfo",{"name":"joel"});
				$.subscribe("newInfo",function(evt,data){
					console.log("anther subscribute newInfo");
				});
				$.publish("newInfo",{"name":"joel"});
				$.unsubscribe("newInfo");
				console.log("-------------------------");
				$.publish("newInfo",{"name":"joel"});
				console.log("-------------------------");
				return ;
				$("a").subscribe("clickA",function(){
					console.log("a was clicked");
				});
				$.publish("clickA");
				
				$("a").unsubscribe("clickA");
				$.publish("clickA");
			});
		</script>
	</body>
</html>
<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" type="text/css" href="../../../sourceLib/css/base.css">
	
	<script type="text/javascript" src="avalon.0.7.js"></script>
	<style>
		#classtable {
		    border: 1px solid #333333;
		    border-collapse: collapse;
		    width: 90%;
		}
		#classtable td, #classtable th {
		    border: 1px solid #333333;
		    padding: 4px;
		}
		tr.odd {
		}
		tr.even {
		    background: none repeat scroll 0 0 #3671A5;
		}
		tr.hover {
		    background: none repeat scroll 0 0 #AABCCD !important;
		}
	</style>
</head>
<body>
	<table id="classtable" >
           <thead>
               <tr>
                   <th>流程</th>
                   <th>启动人</th>
                   <th>启动时间</th>
                   <th>状态</th>
               </tr>
           </thead>
           <tbody ms-each-row="rows" ms-controller="classOper" >
               <tr ms-class-odd="$index % 2"
                   ms-class-even="!($index % 2)"
                   ms-hover="hover"
                   >
                   <td><a href="javascript:void(0)" ms-click="$remove">删除行{{$index+1}}</a></td>
                   <td>{{ Math.random().toString(36).substring(2, 15) }}</td>
                   <td>{{ new Date | date("yyyy-MM-dd HH:mm-ss") }}</td>
                   <td>{{ $first || $last }}</td>
               </tr>
           </tbody>
       </table>

       <div ms-controller="iteratorController">
       		<ul ms-each-el="nameArr">
       			<li>
       				<span>{{$index+1}}</span>
       				<span>{{el.name}}</span>
       				<span>{{el.age}}</span>
       				<span><a href="javascript:void(0)" ms-click="$remove">删除行{{$index+1}}</a></span>
       			</li>
       		</ul>
       		
       	</div>
	<script type="text/javascript">
		/*
			ms-class-xxx="aaa"， xxx为类名， aaa为ViewModel的属性或表达式， 如ms-class-main="add"而vm.add = 		true，那么就为此元素添加上main这个类名。或者ms-class-red="1+1",1+1为2，是真值，因为此元素添加上red这个类名。 ms-class每次只能添加一个类名，如果类名是aaa-bbb-ccc这个样子，那么绑定为ms-class-aaa-bbbb-ccc="bool"。

		ms-hover="类名"，当用户的鼠标悬浮在元素上方时，添加此类名，移走时移除。

		ms-active="类名"，当用户通过点击事件等让元素处于获得焦点状态（或叫激活状态），就添加类名，失去焦点移除。
		*/
		(function(){
			//avalon.ready(function() {
			    avalon.define("classOper", [], function(vm) {
			        vm.rows = avalon.range(0, 15);//即[0..15]
			        //console.log(vm.rows);
			        //$remove,$first,$last,$index 均为框架内定义的变量或方法
			       
			    });
			     //ms-each-row ms-each-el
			    avalon.define("iteratorController",function(vm){
			    	vm.nameArr = [{
			    		name:"joel",
			    		age:20
			    	},
			    	{
			    		name:"lili",
			    		age:20
			    	}];
			    });
			    /*
			    	开始扫描DOM树，抽取绑定。
			    	若avalon.define 在avalon.ready中执行，则需要执行 .scan操作
			    */
			    //avalon.scan();
			//});
		})();
		
	</script>
</body>
</html>
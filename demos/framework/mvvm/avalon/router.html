<!DOCTYPE HTML>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<title></title>
	<link rel="stylesheet" type="text/css" href="../../../sourceLib/css/base.css">
	
	<script type="text/javascript" src="avalon.0.7.js"></script>
	<script type="text/javascript" src="avalon.router.js"></script>
</head>
<body>
	<p> <a href="#">首页</a></p>
	<p> <a href="#list">列表页</a></p>
	<p> <a href="#detail/2342">详情页</a></p>
	<p> <a href="#time/2013/6/1">ddd</a></p>
	<p> <a href="#dfer">eee</a></p>
	<p><a href="#some?foo=bar">link</a></p>
	<script type="text/javascript">
		avalon.ready(function() {
		    avalon.Router.extend({
		        routes: {
		            '': 'index', // 当URL Hash在根目录时执行index方法：url# 
		            'list': 'getList', // 当URL Hash在list节点时执行getList方法：url#list 
		            'detail/:id': 'query', // 当URL Hash在detail节点时执行query方法，并将detail后的数据作为参数传递给query方法：url#list/1001 
		            'time/:year/:month/:day': 'current',//规则与express的比较像
		            '*error': 'showError' // 当URL Hash不匹配以上规则时, 执行error方法 
		        },
		        index: function() {
		            alert('index');
		        },
		        getList: function() {
		            alert(this.value);
		            avalon.log(this);
		        },
		        query: function(id) {
		            alert('query id: ' + id);
		        },
		        current: function(year, month, day) {
		            alert([year, month, day].join("-"));
		        },
		        showError: function(url) {
		            alert( url +"这个URL没有对应的处理函数");
		        }
		    });
		    avalon.history.start(true);
		    avalon.scan();
		});
		
	</script>
</body>
</html>